#!/usr/bin/env bash
# should be called from tmux_console

export APP="LICA-LOGVIEW"

create_new_session()
{

  # ----- LICA-LOGVIEW Window -----

  tmux new-session -s $APP -n "APP_SIDEKIQ" -d

  tmux split-window -v -t $APP:1      # horizontal split

  tmux send-keys -t $APP:1.1 'sudo journalctl -u lica    -f' C-m # web log
  tmux send-keys -t $APP:1.2 'sudo journalctl -u sidekiq -f' C-m # sidekiq log

  # ----- NGINX Window -----

  tmux new-window -n "NGINX"

  tmux split-window -v -p 50 -t $APP:2   # horizontal split

  tmux send-keys -t $APP:2.1 'sudo journalctl -u nginx -f' C-m # nginx log

  # ----- Open With DEV Window -----

  tmux select-window -t $APP:1

}
